<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="A:Platform64 is an automated infrastructure-as-code management solution for small to medium computing environments"><meta name=author content=SerDigital64><link href=https://aplatform64.readthedocs.io/ rel=canonical><link rel="shortcut icon" href=img/favicon.ico><title>A:Platform64 Project</title><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700"><link rel=stylesheet href=css/theme.css><link rel=stylesheet href=css/theme_extra.css><link href=css/pygments-tango.css rel=stylesheet><script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = "/";
  </script><script src=js/jquery-2.1.1.min.js defer></script><script src=js/modernizr-2.8.3.min.js defer></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-KMX4RGXREV"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-KMX4RGXREV');
  </script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=. class="icon icon-home"> A:Platform64 Project</a> <div role=search> <form id=rtd-search-form class=wy-form action=./search.html method=get> <input type=text name=q placeholder="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="main navigation"> <ul class=current> <li class="toctree-l1 current"><a class="reference internal current" href=.>Home</a> <ul class=current> <li class=toctree-l2><a class="reference internal" href=#overview>Overview</a> <ul> <li class=toctree-l3><a class="reference internal" href=#design-principles>Design Principles</a> </li> <li class=toctree-l3><a class="reference internal" href=#architecture>Architecture</a> </li> <li class=toctree-l3><a class="reference internal" href=#automation-scripts>Automation Scripts</a> </li> </ul> </li> <li class=toctree-l2><a class="reference internal" href=#deployment>Deployment</a> <ul> <li class=toctree-l3><a class="reference internal" href=#os-compatibility>OS Compatibility</a> </li> <li class=toctree-l3><a class="reference internal" href=#prerequisites>Prerequisites</a> </li> <li class=toctree-l3><a class="reference internal" href=#installation>Installation</a> </li> </ul> </li> <li class=toctree-l2><a class="reference internal" href=#usage>Usage</a> <ul> <li class=toctree-l3><a class="reference internal" href=#initialize-the-environment>Initialize the environment</a> </li> <li class=toctree-l3><a class="reference internal" href=#register-managed-hosts>Register managed hosts</a> </li> <li class=toctree-l3><a class="reference internal" href=#run-automation-scripts>Run automation scripts</a> </li> </ul> </li> <li class=toctree-l2><a class="reference internal" href=#development>Development</a> <ul> <li class=toctree-l3><a class="reference internal" href=#environment>Environment</a> </li> <li class=toctree-l3><a class="reference internal" href=#repositories>Repositories</a> </li> </ul> </li> <li class=toctree-l2><a class="reference internal" href=#contributing>Contributing</a> </li> <li class=toctree-l2><a class="reference internal" href=#author>Author</a> </li> <li class=toctree-l2><a class="reference internal" href=#license>License</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Scripts</span></p> <ul> <li class=toctree-l1><a href=bin/ap64/ class="reference internal">ap64</a> </li> <li class=toctree-l1><a href=bin/install-aplatform64/ class="reference internal">install-aplatform64</a> </li> </ul> <p class=caption><span class=caption-text>Contributing</span></p> <ul> <li class=toctree-l1><a href=contributing/CONTRIBUTING/ class="reference internal">guidelines</a> </li> <li class=toctree-l1><a href=contributing/CODE_OF_CONDUCT/ class="reference internal">conduct</a> </li> <li class=toctree-l1><a class="reference internal" href=contributing/COPYING>license</a> </li> <li class=toctree-l1><a href=contributing/CHANGELOG/ class="reference internal">changelog</a> </li> </ul> <p class=caption><span class=caption-text>Playbooks</span></p> <ul> <li class=toctree-l1><a class href=playbooks/bootstrap_aplatform64_nodes.md>bootstrap_aplatform64_nodes</a> </li> <li class=toctree-l1><a href=playbooks/manage_aplatform64_servers/ class="reference internal">manage_aplatform64_servers</a> </li> <li class=toctree-l1><a href=playbooks/manage_aplatform64_nodes/ class="reference internal">manage_aplatform64_nodes</a> </li> <li class=toctree-l1><a href=playbooks/manage_cloud_control_nodes/ class="reference internal">manage_cloud_control_nodes</a> </li> <li class=toctree-l1><a href=playbooks/manage_cloud_realm/ class="reference internal">manage_cloud_realm</a> </li> <li class=toctree-l1><a href=playbooks/manage_dev_nodes/ class="reference internal">manage_dev_nodes</a> </li> <li class=toctree-l1><a href=playbooks/manage_doc_sites/ class="reference internal">manage_doc_sites</a> </li> <li class=toctree-l1><a href=playbooks/manage_file_servers/ class="reference internal">manage_file_servers</a> </li> <li class=toctree-l1><a href=playbooks/manage_git_servers/ class="reference internal">manage_git_servers</a> </li> <li class=toctree-l1><a href=playbooks/manage_gitlab_servers/ class="reference internal">manage_gitlab_servers</a> </li> <li class=toctree-l1><a href=playbooks/manage_hpc_nodes/ class="reference internal">manage_hpc_nodes</a> </li> <li class=toctree-l1><a href=playbooks/manage_jenkins_controllers/ class="reference internal">manage_jenkins_controllers</a> </li> <li class=toctree-l1><a href=playbooks/manage_jenkins_workers/ class="reference internal">manage_jenkins_workers</a> </li> <li class=toctree-l1><a href=playbooks/manage_linux_workstations/ class="reference internal">manage_linux_workstations</a> </li> <li class=toctree-l1><a href=playbooks/manage_linux_servers/ class="reference internal">manage_linux_servers</a> </li> <li class=toctree-l1><a href=playbooks/manage_office_nodes/ class="reference internal">manage_office_nodes</a> </li> <li class=toctree-l1><a href=playbooks/manage_test_nodes/ class="reference internal">manage_test_nodes</a> </li> </ul> <p class=caption><span class=caption-text>Collections</span></p> <ul> <li class=toctree-l1><a href=collections/application/ class="reference internal">application</a> </li> <li class=toctree-l1><a href=collections/automation/ class="reference internal">automation</a> </li> <li class=toctree-l1><a href=collections/backup/ class="reference internal">backup</a> </li> <li class=toctree-l1><a href=collections/cloud/ class="reference internal">cloud</a> </li> <li class=toctree-l1><a href=collections/container/ class="reference internal">container</a> </li> <li class=toctree-l1><a href=collections/database/ class="reference internal">database</a> </li> <li class=toctree-l1><a href=collections/development/ class="reference internal">development</a> </li> <li class=toctree-l1><a href=collections/devops/ class="reference internal">devops</a> </li> <li class=toctree-l1><a href=collections/hardware/ class="reference internal">hardware</a> </li> <li class=toctree-l1><a href=collections/hypervisor/ class="reference internal">hypervisor</a> </li> <li class=toctree-l1><a href=collections/infrastructure/ class="reference internal">infrastructure</a> </li> <li class=toctree-l1><a href=collections/monitor/ class="reference internal">monitor</a> </li> <li class=toctree-l1><a href=collections/network/ class="reference internal">network</a> </li> <li class=toctree-l1><a href=collections/security/ class="reference internal">security</a> </li> <li class=toctree-l1><a href=collections/storage/ class="reference internal">storage</a> </li> <li class=toctree-l1><a href=collections/system/ class="reference internal">system</a> </li> <li class=toctree-l1><a href=collections/web/ class="reference internal">web</a> </li> </ul> <p class=caption><span class=caption-text>Roles</span></p> <ul> <li class=toctree-l1><a href=roles/app_blender/ class="reference internal">app_blender</a> </li> <li class=toctree-l1><a href=roles/app_chrome/ class="reference internal">app_chrome</a> </li> <li class=toctree-l1><a href=roles/app_darktable/ class="reference internal">app_darktable</a> </li> <li class=toctree-l1><a href=roles/app_drawio/ class="reference internal">app_drawio</a> </li> <li class=toctree-l1><a href=roles/app_firefox/ class="reference internal">app_firefox</a> </li> <li class=toctree-l1><a href=roles/app_freecad/ class="reference internal">app_freecad</a> </li> <li class=toctree-l1><a href=roles/app_gimp/ class="reference internal">app_gimp</a> </li> <li class=toctree-l1><a href=roles/app_inkscape/ class="reference internal">app_inkscape</a> </li> <li class=toctree-l1><a href=roles/app_keepassxc/ class="reference internal">app_keepassxc</a> </li> <li class=toctree-l1><a href=roles/app_kryta/ class="reference internal">app_kryta</a> </li> <li class=toctree-l1><a href=roles/app_libreoffice/ class="reference internal">app_libreoffice</a> </li> <li class=toctree-l1><a href=roles/app_msteams/ class="reference internal">app_msteams</a> </li> <li class=toctree-l1><a href=roles/app_obs/ class="reference internal">app_obs</a> </li> <li class=toctree-l1><a href=roles/app_pinta/ class="reference internal">app_pinta</a> </li> <li class=toctree-l1><a href=roles/app_pitivi/ class="reference internal">app_pitivi</a> </li> <li class=toctree-l1><a href=roles/app_shotcut/ class="reference internal">app_shotcut</a> </li> <li class=toctree-l1><a href=roles/app_skype/ class="reference internal">app_skype</a> </li> <li class=toctree-l1><a href=roles/app_slack/ class="reference internal">app_slack</a> </li> <li class=toctree-l1><a href=roles/app_spotify/ class="reference internal">app_spotify</a> </li> <li class=toctree-l1><a href=roles/app_tilix/ class="reference internal">app_tilix</a> </li> <li class=toctree-l1><a href=roles/app_vscode/ class="reference internal">app_vscode</a> </li> <li class=toctree-l1><a href=roles/app_xmind/ class="reference internal">app_xmind</a> </li> <li class=toctree-l1><a href=roles/app_zoom/ class="reference internal">app_zoom</a> </li> <li class=toctree-l1><a href=roles/auto_ansible_control/ class="reference internal">auto_ansible_control</a> </li> <li class=toctree-l1><a href=roles/auto_ansible_node/ class="reference internal">auto_ansible_node</a> </li> <li class=toctree-l1><a href=roles/auto_aplatform64/ class="reference internal">auto_aplatform64</a> </li> <li class=toctree-l1><a href=roles/bkp_archive/ class="reference internal">bkp_archive</a> </li> <li class=toctree-l1><a href=roles/bkp_rclone_server/ class="reference internal">bkp_rclone_server</a> </li> <li class=toctree-l1><a href=roles/bkp_restic/ class="reference internal">bkp_restic</a> </li> <li class=toctree-l1><a href=roles/cnt_docker/ class="reference internal">cnt_docker</a> </li> <li class=toctree-l1><a href=roles/cnt_kubectl/ class="reference internal">cnt_kubectl</a> </li> <li class=toctree-l1><a href=roles/cnt_podman/ class="reference internal">cnt_podman</a> </li> <li class=toctree-l1><a href=roles/cloud_aws_cli/ class="reference internal">cloud_aws_cli</a> </li> <li class=toctree-l1><a href=roles/cloud_aws_realm/ class="reference internal">cloud_aws_realm</a> </li> <li class=toctree-l1><a href=roles/cloud_azure_cli/ class="reference internal">cloud_azure_cli</a> </li> <li class=toctree-l1><a href=roles/cloud_foundry_cli/ class="reference internal">cloud_foundry_cli</a> </li> <li class=toctree-l1><a href=roles/cloud_google_cli/ class="reference internal">cloud_google_cli</a> </li> <li class=toctree-l1><a href=roles/cloud_ibm_cli/ class="reference internal">cloud_ibm_cli</a> </li> <li class=toctree-l1><a href=roles/db_mariadb_client/ class="reference internal">db_mariadb_client</a> </li> <li class=toctree-l1><a href=roles/db_mariadb_server/ class="reference internal">db_mariadb_server</a> </li> <li class=toctree-l1><a href=roles/db_mysql_client/ class="reference internal">db_mysql_client</a> </li> <li class=toctree-l1><a href=roles/db_mysql_server/ class="reference internal">db_mysql_server</a> </li> <li class=toctree-l1><a href=roles/db_postgresql_client/ class="reference internal">db_postgresql_client</a> </li> <li class=toctree-l1><a href=roles/db_postgresql_server/ class="reference internal">db_postgresql_server</a> </li> <li class=toctree-l1><a href=roles/dev_gcc/ class="reference internal">dev_gcc</a> </li> <li class=toctree-l1><a href=roles/dev_java/ class="reference internal">dev_java</a> </li> <li class=toctree-l1><a href=roles/dev_nodejs/ class="reference internal">dev_nodejs</a> </li> <li class=toctree-l1><a href=roles/dev_opencl/ class="reference internal">dev_opencl</a> </li> <li class=toctree-l1><a href=roles/dev_python/ class="reference internal">dev_python</a> </li> <li class=toctree-l1><a href=roles/dev_ruby/ class="reference internal">dev_ruby</a> </li> <li class=toctree-l1><a href=roles/dev_tools/ class="reference internal">dev_tools</a> </li> <li class=toctree-l1><a href=roles/dops_ansiblelint/ class="reference internal">dops_ansiblelint</a> </li> <li class=toctree-l1><a href=roles/dops_batscore/ class="reference internal">dops_batscore</a> </li> <li class=toctree-l1><a href=roles/dops_git_client/ class="reference internal">dops_git_client</a> </li> <li class=toctree-l1><a href=roles/dops_git_server/ class="reference internal">dops_git_server</a> </li> <li class=toctree-l1><a href=roles/dops_github_cli/ class="reference internal">dops_github_cli</a> </li> <li class=toctree-l1><a href=roles/dops_gitlab_server/ class="reference internal">dops_gitlab_server</a> </li> <li class=toctree-l1><a href=roles/dops_jenkins/ class="reference internal">dops_jenkins</a> </li> <li class=toctree-l1><a href=roles/dops_molecule/ class="reference internal">dops_molecule</a> </li> <li class=toctree-l1><a href=roles/dops_shellcheck/ class="reference internal">dops_shellcheck</a> </li> <li class=toctree-l1><a href=roles/dops_tfsec/ class="reference internal">dops_tfsec</a> </li> <li class=toctree-l1><a href=roles/dops_yamllint/ class="reference internal">dops_yamllint</a> </li> <li class=toctree-l1><a href=roles/hpv_libvirt_client/ class="reference internal">hpv_libvirt_client</a> </li> <li class=toctree-l1><a href=roles/hpv_libvirt_server/ class="reference internal">hpv_libvirt_server</a> </li> <li class=toctree-l1><a href=roles/hw_gpu_amd/ class="reference internal">hw_gpu_amd</a> </li> <li class=toctree-l1><a href=roles/infra_helm/ class="reference internal">infra_helm</a> </li> <li class=toctree-l1><a href=roles/infra_terraform/ class="reference internal">infra_terraform</a> </li> <li class=toctree-l1><a href=roles/infra_terragrunt/ class="reference internal">infra_terragrunt</a> </li> <li class=toctree-l1><a href=roles/infra_vagrant/ class="reference internal">infra_vagrant</a> </li> <li class=toctree-l1><a href=roles/mon_fluentd/ class="reference internal">mon_fluentd</a> </li> <li class=toctree-l1><a href=roles/net_bind/ class="reference internal">net_bind</a> </li> <li class=toctree-l1><a href=roles/net_istioctl/ class="reference internal">net_istioctl</a> </li> <li class=toctree-l1><a href=roles/sec_firewall_os/ class="reference internal">sec_firewall_os</a> </li> <li class=toctree-l1><a href=roles/sec_firewall_os/ class="reference internal">sec_firewall_os</a> </li> <li class=toctree-l1><a href=roles/sec_key_ssh/ class="reference internal">sec_key_ssh</a> </li> <li class=toctree-l1><a href=roles/sec_openssh_client/ class="reference internal">sec_openssh_client</a> </li> <li class=toctree-l1><a href=roles/sec_openssh_server/ class="reference internal">sec_openssh_server</a> </li> <li class=toctree-l1><a href=roles/stg_autofs/ class="reference internal">stg_autofs</a> </li> <li class=toctree-l1><a href=roles/stg_nfs_client/ class="reference internal">stg_nfs_client</a> </li> <li class=toctree-l1><a href=roles/stg_nfs_server/ class="reference internal">stg_nfs_server</a> </li> <li class=toctree-l1><a href=roles/stg_repository/ class="reference internal">stg_repository</a> </li> <li class=toctree-l1><a href=roles/sys_dconf/ class="reference internal">sys_dconf</a> </li> <li class=toctree-l1><a href=roles/sys_fonts/ class="reference internal">sys_fonts</a> </li> <li class=toctree-l1><a href=roles/sys_gui_cinnamon/ class="reference internal">sys_gui_cinnamon</a> </li> <li class=toctree-l1><a href=roles/sys_kernel/ class="reference internal">sys_kernel</a> </li> <li class=toctree-l1><a href=roles/sys_mc/ class="reference internal">sys_mc</a> </li> <li class=toctree-l1><a href=roles/sys_package/ class="reference internal">sys_package</a> </li> <li class=toctree-l1><a href=roles/sys_repository/ class="reference internal">sys_repository</a> </li> <li class=toctree-l1><a href=roles/sys_shell/ class="reference internal">sys_shell</a> </li> <li class=toctree-l1><a href=roles/sys_subsystem/ class="reference internal">sys_subsystem</a> </li> <li class=toctree-l1><a href=roles/sys_sudo/ class="reference internal">sys_sudo</a> </li> <li class=toctree-l1><a href=roles/sys_tools/ class="reference internal">sys_tools</a> </li> <li class=toctree-l1><a href=roles/sys_user/ class="reference internal">sys_user</a> </li> <li class=toctree-l1><a href=roles/web_haproxy/ class="reference internal">web_haproxy</a> </li> <li class=toctree-l1><a href=roles/web_httpd/ class="reference internal">web_httpd</a> </li> <li class=toctree-l1><a href=roles/web_mkdocs/ class="reference internal">web_mkdocs</a> </li> <li class=toctree-l1><a href=roles/web_nginx/ class="reference internal">web_nginx</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="top navigation"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=.>A:Platform64 Project</a> </nav> <div class=wy-nav-content> <div class=rst-content> <div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=.>Docs</a> &raquo;</li> <li>Home</li> <li class=wy-breadcrumbs-aside> <a href=https://github.com/serdigital64/aplatform64/edit/master/docs/index.md class="icon icon-github"> Edit on GitHub</a> </li> </ul> <hr> </div> <div role=main> <div class=section> <h2 id=project-aplatform64>Project: A:Platform64<a class=headerlink href=#project-aplatform64 title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><code> █████╗    ██████╗ ██╗      █████╗ ████████╗███████╗ ██████╗ ██████╗ ███╗   ███╗ ██████╗ ██╗  ██╗
██╔══██╗██╗██╔══██╗██║     ██╔══██╗╚══██╔══╝██╔════╝██╔═══██╗██╔══██╗████╗ ████║██╔════╝ ██║  ██║
███████║╚═╝██████╔╝██║     ███████║   ██║   █████╗  ██║   ██║██████╔╝██╔████╔██║███████╗ ███████║
██╔══██║██╗██╔═══╝ ██║     ██╔══██║   ██║   ██╔══╝  ██║   ██║██╔══██╗██║╚██╔╝██║██╔═══██╗╚════██║
██║  ██║╚═╝██║     ███████╗██║  ██║   ██║   ██║     ╚██████╔╝██║  ██║██║ ╚═╝ ██║╚██████╔╝     ██║
╚═╝  ╚═╝   ╚═╝     ╚══════╝╚═╝  ╚═╝   ╚═╝   ╚═╝      ╚═════╝ ╚═╝  ╚═╝╚═╝     ╚═╝ ╚═════╝      ╚═╝
</code></pre></div> <h3 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h3> <p><strong>A:Platform64</strong> is an automated infrastructure-as-code management platform based on Ansible for small to medium computing environments.</p> <h4 id=design-principles>Design Principles<a class=headerlink href=#design-principles title="Permanent link">&para;</a></h4> <p>The platform is designed to take full control of the target infrastructure under the following principles:</p> <ul> <li><strong>Automate everything</strong>: all management tasks should be automated. Exceptions should be carefully evaluated and only used when no automation is possible.</li> <li><strong>Separate code from end-state configuration</strong>: automation scripts must be developed to define a clear and well-documented parameter interface for setting end-state and behaviour data.</li> <li><strong>Ansible Roles must be specialized</strong>: roles will be used to manage single components or services. Dependencies must be clearly documented for cases where the role relies on features provided by other roles.</li> <li><strong>Infrastructure data model</strong>: the infrastructure will use a data model to represent the target end-state and run-time behaviour. The model includes the following elements:<ul> <li><em>Site</em>: Represents a group of Nodes that are managed by the same Control Node.</li> <li><em>Node</em>: Compute node that is capable of hosting software components and that is fully managed by the Control Node.</li> <li><em>Component</em>: Individual software product that is installed in a Node.</li> <li><em>Service</em>: Group of Components configured in one or more Nodes to serve a particular function.</li> </ul> </li> <li><strong>Multi-platform friendly</strong>: roles must be prepared to separate platform-specific code into individual files that can be loaded on-demand. Roles should not be allowed to execute on platforms that are not supported.</li> <li><strong>Test everything</strong>: roles must include testing code to check platform compatibility, code sanity, standardization, integration and functionality.</li> </ul> <h4 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">&para;</a></h4> <p>The platform defines the following components:</p> <ul> <li><strong>Control Node</strong>: compute node that will host the Ansible engine and the <strong>A:Platform64</strong> platform.</li> <li><strong>Management Node</strong>: compute nodes that will me managed by <strong>A:Platform64</strong></li> <li><strong>Site</strong>: group of hosts that shares a set of configuration files. Sites can be used to isolated environments (e.g.: prod, dev, test, etc.)</li> </ul> <p>Communication between the <strong>Control Node</strong> and the <strong>Management Nodes</strong> will be done using OpenSSH and regular Linux user accounts with public/private key pairs. Root privilege will be provided by Sudo.</p> <p>The <strong>Control Node</strong> will have the following directory structure to store <strong>A:Platform64</strong> components:</p> <table> <thead> <tr> <th>Path</th> <th>Content</th> </tr> </thead> <tbody> <tr> <td>etc/</td> <td>Configuration files and keys</td> </tr> <tr> <td>inventories/</td> <td>Ansible inventory files, host_vars and group_vars</td> </tr> <tr> <td>collections/</td> <td>Ansible Collections installed from Ansible-Galaxy</td> </tr> <tr> <td>roles/</td> <td>Custom Ansible Roles</td> </tr> <tr> <td>playbooks/</td> <td>Custom Ansible Playbooks</td> </tr> <tr> <td>files/</td> <td>Ansible data files for custom playbooks and roles</td> </tr> <tr> <td>templates/</td> <td>Custom Ansible templates</td> </tr> <tr> <td>tests/</td> <td>Ansible playbooks for testing Custom Ansible Roles and Playbooks</td> </tr> <tr> <td>vars/</td> <td>Ansible variables for custom playbooks and roles</td> </tr> <tr> <td>logs/</td> <td>Execution logs</td> </tr> <tr> <td>var/</td> <td>Variable and temporal data store</td> </tr> <tr> <td>bin/</td> <td>Shell scripts</td> </tr> <tr> <td>docs/</td> <td>Repository for storing site-specific documentation</td> </tr> </tbody> </table> <p>The directory structure and configuration are automatically created during the <a href=#deployment>Deployment Procedure</a></p> <h4 id=automation-scripts>Automation Scripts<a class=headerlink href=#automation-scripts title="Permanent link">&para;</a></h4> <p>The platform uses Ansible Roles to implement automation scripts. Roles are grouped into Ansible Collections based on the managed component type:</p> <table> <thead> <tr> <th>Collection</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/application/ >application</a></td> <td>Ansible Roles for automating office applications provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/automation/ >automation</a></td> <td>Ansible Roles for managing automation tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/backup/ >backup</a></td> <td>Ansible Roles for automating backup tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/cloud/ >cloud</a></td> <td>Ansible Roles for automating cloud tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/container/ >container</a></td> <td>Ansible Roles for automating container tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/database/ >database</a></td> <td>Ansible Roles for automating database tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/development/ >development</a></td> <td>Ansible Roles for automating development environment provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/devops/ >devops</a></td> <td>Ansible Roles for automating devops tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/hardware/ >hardware</a></td> <td>Ansible Roles for automating hardware drivers provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/hypervisor/ >hypervisor</a></td> <td>Ansible Roles for automating hypervisor tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/infrastructure/ >infrastructure</a></td> <td>Ansible Roles for automating infrastructure tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/monitor/ >monitor</a></td> <td>Ansible Roles for automating monitoring tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/network/ >network</a></td> <td>Ansible Roles for automating network tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/security/ >security</a></td> <td>Ansible Roles for automating security tools provisioning</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/storage/ >storage</a></td> <td>Ansible Roles for automating storage management</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/system/ >system</a></td> <td>Ansible Roles for automating operating system management</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/collections/web/ >web</a></td> <td>Ansible Roles for automating web tools provisioning</td> </tr> </tbody> </table> <p>Services are implemented in the form of Ansible playbooks. Each playbook will integrate the roles needed to implement the service along with their own set of end-state and inventory configurations:</p> <ul> <li>Playbooks location: <code>playbooks/&lt;SITE&gt;/</code></li> <li>End-State configuration location: <code>inventories/&lt;SITE&gt;/group_vars/&lt;GROUP_NAME&gt;/</code></li> <li>Inventory definition: <code>inventories/&lt;SITE&gt;/&lt;INVENTORY&gt;.ini</code></li> </ul> <table> <thead> <tr> <th>Playbook</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/bootstrap_aplatform64_nodes/ >bootstrap_aplatform64_nodes</a></td> <td>Bootstrap Ansible Managed nodes</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_aplatform64_servers/ >manage_aplatform64_servers</a></td> <td>Manage Ansible Control node</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_aplatform64_nodes/ >manage_aplatform64_nodes</a></td> <td>Manage Ansible Managed nodes</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_cloud_control_nodes/ >manage_cloud_control_nodes</a></td> <td>Provision public cloud management tools</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_cloud_realm/ >manage_cloud_realm</a></td> <td>Manage cloud provider accounts, users and organizations as a single entity</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_dev_nodes/ >manage_dev_nodes</a></td> <td>Provision software development environments</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_doc_sites/ >manage_doc_sites</a></td> <td>Provision documentation site management tools</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_file_servers/ >manage_file_servers</a></td> <td>Manage file servers</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_git_servers/ >manage_git_servers</a></td> <td>Manage GIT servers</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_hpc_nodes/ >manage_hpc_nodes</a></td> <td>Provision high-performance computing environments</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_jenkins_controllers/ >manage_jenkins_controllers</a></td> <td>Manage Jenkins controllers</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_jenkins_workers/ >manage_jenkins_workers</a></td> <td>Manage Jenkins workers</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_linux_servers/ >manage_linux_servers</a></td> <td>Manage Linux Servers</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_linux_workstations/ >manage_linux_workstations</a></td> <td>Manage Linux Workstations</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_macos_workstations/ >manage_macos_workstations</a></td> <td>Manage MacOS Workstations</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_office_nodes/ >manage_office_nodes</a></td> <td>Provision office productivity applications</td> </tr> <tr> <td><a href=https://aplatform64.readthedocs.io/en/latest/playbooks/manage_test_nodes/ >manage_test_nodes</a></td> <td>Provision software testing tools</td> </tr> </tbody> </table> <h3 id=deployment>Deployment<a class=headerlink href=#deployment title="Permanent link">&para;</a></h3> <h4 id=os-compatibility>OS Compatibility<a class=headerlink href=#os-compatibility title="Permanent link">&para;</a></h4> <p><strong>A:Platform64</strong> is compatible with the following Linux operating systems:</p> <ul> <li>CentOS8</li> <li>RedHat8</li> <li>AlmaLinux8</li> <li>OracleLinux8</li> <li>Ubuntu20</li> <li>Ubuntu21</li> <li>Fedora33</li> <li>Fedora35</li> <li>Debian10</li> <li>Debian11</li> <li>MacOSX12</li> </ul> <p>Notice that roles have their own compatibility matrix. Refer to the respective documentation for further details.</p> <h4 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h4> <ul> <li>Control Node:<ul> <li>Python 3</li> <li>OpenSSH</li> <li>Sudo</li> <li>Regular user account with sudo privilege for running the installer</li> </ul> </li> <li>Managed Nodes:<ul> <li>Python 3</li> <li>OpenSSH</li> <li>Sudo</li> <li>Regular user account with sudo privilege for the bootstrap process</li> </ul> </li> </ul> <h4 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h4> <p>Download the installation script and resources:</p> <ul> <li><a href=https://raw.githubusercontent.com/aplatform64/automation/main/roles/auto_aplatform64/files/installer/install-aplatform64>install-aplatform64</a></li> </ul> <div class=codehilite><pre><span></span><code>curl -O https://raw.githubusercontent.com/aplatform64/automation/main/roles/auto_aplatform64/files/installer/install-aplatform64
chmod <span class=m>0755</span> install-aplatform64
</code></pre></div> <p>Run the installation script with the default options. See the <a href=https://aplatform64.readthedocs.io/en/latest/bin/install-aplatform64/ >documentation</a> for more options</p> <div class=codehilite><pre><span></span><code>./install-aplatform64 -x
</code></pre></div> <p>Done. The <strong>A:Platform64</strong> platform is now installed.</p> <h3 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">&para;</a></h3> <h4 id=initialize-the-environment>Initialize the environment<a class=headerlink href=#initialize-the-environment title="Permanent link">&para;</a></h4> <p>To start using <strong>A:Platform64</strong> change to the Ansible Control user and set the environment:</p> <div class=codehilite><pre><span></span><code><span class=c1># Switch to the Ansible Control user</span>
sudo su - sitectl

<span class=c1># Set the environment for Ansible</span>
<span class=nb>source</span> /opt/aplatform64/bin/site/ansible_control.env
workon aplatform64

<span class=c1># Go to the install location</span>
<span class=nb>cd</span> /opt/aplatform64/
</code></pre></div> <h4 id=register-managed-hosts>Register managed hosts<a class=headerlink href=#register-managed-hosts title="Permanent link">&para;</a></h4> <p>Register the target remote host in the bootstrap process by adding it to the inventory:</p> <ul> <li>file: <code>inventories/site/aplatform64_service.ini</code></li> <li>group <code>[bootstrap_aplatform64_nodes_distro]</code></li> </ul> <p>The bootstrap process will connect to the managed node using a pre-existing user account with root privilege and then create the dedicated account for Ansible.</p> <p>Register the bootstrap user details and review the dedicated user definition:</p> <ul> <li>file: <code>inventories/site/group_vars/bootstrap_aplatform64_nodes/auto_ansible_node.yml</code><ul> <li>variable <code>auto_ansible_node_bootstrap:</code></li> <li>variable <code>auto_ansible_node_user:</code></li> </ul> </li> <li>file: <code>inventories/site/group_vars/aplatform64_nodes/auto_ansible_node.yml</code><ul> <li>variable <code>auto_ansible_node_user:</code></li> </ul> </li> </ul> <p>Execute the bootstrap process:</p> <div class=codehilite><pre><span></span><code>/opt/aplatform64/bin/ap64.sh -n -p bootstrap_aplatform64_nodes -s <span class=s2>&quot;</span><span class=si>${</span><span class=nv>APLATFORM64_SITE</span><span class=si>}</span><span class=s2>&quot;</span>
</code></pre></div> <p>The host is now ready for Ansible. Promote the hostname by removing it from the <code>[bootstrap_aplatform64_nodes_distro]</code> group and adding it to:</p> <ul> <li>File: <code>inventories/site/aplatform64_service.ini</code></li> <li>Host Group: <code>aplatform64_nodes</code></li> </ul> <h4 id=run-automation-scripts>Run automation scripts<a class=headerlink href=#run-automation-scripts title="Permanent link">&para;</a></h4> <p>Use any of the predefined playbooks and customize the default end-state definitions for the group or create per host definitions.</p> <p>For example, to configure workstations and notebooks for office work:</p> <ol> <li>Add the target hostname to the inventory: <code>inventories/site/office_nodes.ini</code></li> <li>Review default end-state configuration: <code>inventories/site/group_vars/office_nodes/*</code></li> <li>Run the playgook:</li> </ol> <div class=codehilite><pre><span></span><code>ansible-playbook <span class=se>\</span>
  -i <span class=s2>&quot;inventories/</span><span class=si>${</span><span class=nv>APLATFORM64_SITE</span><span class=si>}</span><span class=s2>/office_nodes.ini&quot;</span> <span class=se>\</span>
  <span class=s2>&quot;playbooks/</span><span class=si>${</span><span class=nv>APLATFORM64_SITE</span><span class=si>}</span><span class=s2>/manage_office_nodes.yml&quot;</span>
</code></pre></div> <p>Additional playbooks and roles can be added to further customize the platform.</p> <p>In addition to the standard ansible CLI commands, A:Platform64 provides the <a href=https://aplatform64.readthedocs.io/en/latest/bin/ap64/ >bin/ap64.sh</a> CLI that can be used for:</p> <ul> <li>List/Run playbooks</li> <li>List/Create sites</li> <li>Upgrade collections</li> <li>Update sites configurations</li> </ul> <h3 id=development>Development<a class=headerlink href=#development title="Permanent link">&para;</a></h3> <h4 id=environment>Environment<a class=headerlink href=#environment title="Permanent link">&para;</a></h4> <p>Use the following instructions for preparing the development environment:</p> <ul> <li>Prepare dev tools:<ul> <li>Install GIT</li> <li>Install Git Flow</li> <li>Install Python, PIP, Virtual Environment Wrapper</li> </ul> </li> <li>Clone GIT repositories</li> </ul> <div class=codehilite><pre><span></span><code><span class=c1># Create the main repository</span>
<span class=nb>cd</span> &lt;YOUR_PROJECTS_PATH&gt;
git clone https://github.com/serdigital64/aplatform64
<span class=nb>cd</span> aplatform64
<span class=c1># Create module repositories as git submodules</span>
git submodule init
<span class=c1># Update modules</span>
git submodule update
<span class=c1># Enable main branch on submodules</span>
git submodule foreach <span class=s2>&quot;git checkout main&quot;</span><span class=p>;</span> git submodule foreach <span class=s2>&quot;git checkout develop&quot;</span>
<span class=c1># (Optional) Initialize git flow. Production branch:main, use defaults for the remaining branches</span>
git submodule foreach <span class=s2>&quot;git flow init&quot;</span>
</code></pre></div> <ul> <li>Adjust environment variables to reflect your configuration:</li> </ul> <div class=codehilite><pre><span></span><code><span class=c1># Copy environment definition files from templates:</span>
cp dot.local .local
cp dot.secrets .secrets
<span class=c1># Review and update content for both files</span>
</code></pre></div> <ul> <li>Create Python Virtual Environment Wrapper workspace</li> </ul> <div class=codehilite><pre><span></span><code><span class=nb>source</span> .local
<span class=nb>source</span> .env
<span class=nb>source</span> <span class=s2>&quot;</span><span class=nv>$DEVAP_VEW_LOADER</span><span class=s2>&quot;</span>
mkvirtualenv aplatform64
</code></pre></div> <ul> <li>Install Python dev modules</li> </ul> <div class=codehilite><pre><span></span><code>pip3 install --upgrade -r requirements-aplatform64.txt
</code></pre></div> <ul> <li>The environment is now ready. From now use the following script to load environment variables and set the virtual Python environment:</li> </ul> <div class=codehilite><pre><span></span><code><span class=nb>source</span> bin/devap-set
</code></pre></div> <ul> <li>Additional scripts are provided to support testing and package building:<ul> <li><code>bin/devap-build</code>: build and publish Ansible Collection packages</li> <li><code>bin/devap-test</code>: test Ansible Roles using Molecule</li> </ul> </li> </ul> <h4 id=repositories>Repositories<a class=headerlink href=#repositories title="Permanent link">&para;</a></h4> <ul> <li>Project GIT repository<ul> <li>Main: <a href=https://github.com/serdigital64/aplatform64>https://github.com/serdigital64/aplatform64</a></li> <li>Submodules: <a href=https://github.com/aplatform64>https://github.com/aplatform64</a></li> </ul> </li> <li>Project Ansible Galaxy repository: <a href=https://galaxy.ansible.com/serdigital64>https://galaxy.ansible.com/serdigital64</a></li> <li>Project Documentation: <a href=https://aplatform64.readthedocs.io>https://aplatform64.readthedocs.io</a></li> </ul> <h3 id=contributing>Contributing<a class=headerlink href=#contributing title="Permanent link">&para;</a></h3> <p>Help on implementing new features and maintaining the code base is welcomed.</p> <p>Please see the <a href=contributing/CONTRIBUTING/ >guidelines</a> for further details and the <a href=contributing/CODE_OF_CONDUCT/ >code of conduct</a>.</p> <h3 id=author>Author<a class=headerlink href=#author title="Permanent link">&para;</a></h3> <ul> <li><a href=https://serdigital64.github.io/ >SerDigital64</a></li> </ul> <h3 id=license>License<a class=headerlink href=#license title="Permanent link">&para;</a></h3> <p><a href=https://www.gnu.org/licenses/gpl-3.0.txt>GPL-3.0-or-later</a></p> </div> </div> <footer> <div class=rst-footer-buttons role=navigation aria-label="footer navigation"> <a href=bin/ap64/ class="btn btn-neutral float-right" title=ap64>Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <p>GPL-3.0-or-later</p> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/snide/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=versions> <span class=rst-current-version data-toggle=rst-current-version> <span> <a href=https://github.com/serdigital64/aplatform64/ class="fa fa-github" style="color: #fcfcfc"> GitHub</a> </span> <span><a href=bin/ap64/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script>var base_url = '.';</script> <script src=js/theme_extra.js defer></script> <script src=js/theme.js defer></script> <script src=search/main.js defer></script> <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script> </body> </html> 